## 12/30

- **今日できたこと**：
  - 制約とルールの追加とそのテストの実装
- **詰まったところ / 次回までに潰したい不安**：
  - テストで「repoをモック」する仕方が分からなかった。
  - repoの動きを模した関数を作ることだった。
- **設計で“守れた境界”と“怪しい境界”**：
  - Note(domain)は保存方法を知らない
  - Note(domain)にNoteを生成するルールが明記されている
  - NoteServiceのcreateの内部ではNoteで定義された静的メソッドcreateが実行される
  - NoteServiceは窓口かつ前処理係。NoteRepositoryは作業係。NoteServiceはどこに作業を依頼できるかを知っていればよい
  - 依存の向き
    - OK: app/ → `NoteService` → `NoteRepository` → 実装
    - NG: domain → app/ (ドメインがapp/に依存してはいけない)

## 12/31
- **今日できたこと**：
  - メモの新規作成画面作成
- **詰まったところ / 次回までに潰したい不安**：
  - 課題Aが一人で前に進められなかった。
  - 何を変更するればいいのかがぼやっと分かる程度で具体的な実装はまったく手が動かなかった。
- **設計で“守れた境界”と“怪しい境界”**：
  - 変更をスタートするフローを追体験した。
  - いきなりUIは触らず、まずは「一番壊れやすいところ」から手を付ける（今回はAPIから）
  - 実務では「まず期待する入出力（契約）を決める → それを満たす側（API or UI）から着手」
  - domainは触らずにAPI/infra/UIで吸収するようにした。

## 1/4
- **今日できたこと**：
  - 仕様変更（タグ、タグ検索追加）の実装
- **詰まったところ / 次回までに潰したい不安**：
  - 仕様変更時の思考フローに戸惑った。
    - 影響範囲の把握
    - 変更の順序を決める（基本的には内側（domain））から外（依存するもの）に向かって。）
    - テストを書いて変更後に壊れていないことを確認する
    - 最後にUIで確認する
- **設計で“守れた境界”と“怪しい境界”**：
  - domainも変更する仕様変更だったので広範囲のファイルに変更を加えた
  - メソッドのシグネチャを変更したので影響範囲が大きかった
  - テストを書くことで変更後の動作を保障できた
  
## 1/4（2）
- **今日できたこと**：
  - SearchQueryを別ファイルに切り出すことで検索条件のバリデーションロジックを集約できた。
  - UIの状態管理を`useNoteSearch`フックに集約したことで、コンポーネントが読みやくなった。
- **詰まったところ / 次回までに潰したい不安**：
  - 最初なぜSearchQueryを切り出すのか分からなかった。しかし切り出してバリエーションロジックをまとめたことで、SearchQueryのバリデーションに変更担った場合も影響範囲に把握がしやすくなることが分かった。
- **設計で“守れた境界”と“怪しい境界”**：
  - SearchQuery関連の型定義とロジックを一か所に閉じ込めることができた。
  - UIではコンポーネントは表示に集中できるのようになった。

## 1/12
- **今日できたこと**：
  - Nest.jsを導入した
- **詰まったところ / 次回までに潰したい不安**：
  - 最初、なぜわざわざドメイン層にあるロジックを参照しているのか？という疑問があった。それは「Next.js と Nest.js の両方で同じロジックを再利用可能にするため」「ドメイン層がフレームワークに依存していないことを体感するため」だった。
  - NoteServiceがドメイン層にもアプリケーション層にあることが冗長に感じる。ただこれはNestでDIコンテナに登録するために行っていることで役割が違う。
- **設計で“守れた境界”と“怪しい境界”**：
  - Nest.js（アプリケーション層）を実装するに当たってドメイン層を変更せずにそのまま利用することができた。これによってドメイン層がフレームワークに依存していないことが分かった。
  - Next.js と Nest.js の両方で同じロジックを再利用可能なことを体感した